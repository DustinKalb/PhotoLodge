{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dustin/Documents/IOD/PhotoLodge/CapstoneProject/photolodge-app/src/components/ImagePreview.jsx"],"sourcesContent":["import EditRoundedIcon from '@mui/icons-material/EditRounded';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport Button from '@mui/material/Button';\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogContentText from '@mui/material/DialogContentText';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport { useState } from \"react\";\r\n\r\nexport default function ImagePreview({ image, onClose, onEdit, onDelete }) {\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n\r\n  if (!image) return null;\r\n\r\n  const handleDelete = async () => {\r\n    await fetch(`http://localhost:8080/api/posts/${image._id}`, { method: \"DELETE\" });\r\n    if (onDelete) onDelete();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <img src={image.imageUrl} alt={image.title} style={{ maxWidth: \"100%\" }} />\r\n      <h2>{image.title}</h2>\r\n      <p>{image.description}</p>\r\n      <div>\r\n        {image.tags?.map((tag, i) => (\r\n          <span key={tag + i}>#{tag} </span>\r\n        ))}\r\n      </div>\r\n      <div style={{display: \"flex\", justifyContent: \"center\"}}>\r\n        <Button onClick={onEdit} style={{color: \"tan\"}}>\r\n          <EditRoundedIcon />\r\n        </Button>\r\n        <Button\r\n          onClick={() => setDialogOpen(true)}\r\n          style={{color: \"tan\"}}\r\n        >\r\n          <DeleteIcon />\r\n        </Button>\r\n      </div>\r\n      <Dialog\r\n        open={dialogOpen}\r\n        onClose={() => setDialogOpen(false)}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">{\"Delete Image?\"}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            Are you sure you want to delete this image? This action cannot be undone.\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setDialogOpen(false)}>Cancel</Button>\r\n          <Button onClick={handleDelete} color=\"error\" autoFocus>\r\n            Delete\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AAEe,SAAS,aAAa,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE,QAAQ,EAAE;IACvE,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE7C,IAAI,CAAC,OAAO,OAAO;IAEnB,MAAM,eAAe;QACnB,MAAM,MAAM,CAAC,gCAAgC,EAAE,MAAM,GAAG,EAAE,EAAE;YAAE,QAAQ;QAAS;QAC/E,IAAI,UAAU;IAChB;IAEA,qBACE,8OAAC;;0BACC,8OAAC;gBAAI,KAAK,MAAM,QAAQ;gBAAE,KAAK,MAAM,KAAK;gBAAE,OAAO;oBAAE,UAAU;gBAAO;;;;;;0BACtE,8OAAC;0BAAI,MAAM,KAAK;;;;;;0BAChB,8OAAC;0BAAG,MAAM,WAAW;;;;;;0BACrB,8OAAC;0BACE,MAAM,IAAI,EAAE,IAAI,CAAC,KAAK,kBACrB,8OAAC;;4BAAmB;4BAAE;4BAAI;;uBAAf,MAAM;;;;;;;;;;0BAGrB,8OAAC;gBAAI,OAAO;oBAAC,SAAS;oBAAQ,gBAAgB;gBAAQ;;kCACpD,8OAAC,4JAAA,CAAA,UAAM;wBAAC,SAAS;wBAAQ,OAAO;4BAAC,OAAO;wBAAK;kCAC3C,cAAA,8OAAC,gKAAA,CAAA,UAAe;;;;;;;;;;kCAElB,8OAAC,4JAAA,CAAA,UAAM;wBACL,SAAS,IAAM,cAAc;wBAC7B,OAAO;4BAAC,OAAO;wBAAK;kCAEpB,cAAA,8OAAC,2JAAA,CAAA,UAAU;;;;;;;;;;;;;;;;0BAGf,8OAAC,4JAAA,CAAA,UAAM;gBACL,MAAM;gBACN,SAAS,IAAM,cAAc;gBAC7B,mBAAgB;gBAChB,oBAAiB;;kCAEjB,8OAAC,sKAAA,CAAA,UAAW;wBAAC,IAAG;kCAAsB;;;;;;kCACtC,8OAAC,0KAAA,CAAA,UAAa;kCACZ,cAAA,8OAAC,kLAAA,CAAA,UAAiB;4BAAC,IAAG;sCAA2B;;;;;;;;;;;kCAInD,8OAAC,0KAAA,CAAA,UAAa;;0CACZ,8OAAC,4JAAA,CAAA,UAAM;gCAAC,SAAS,IAAM,cAAc;0CAAQ;;;;;;0CAC7C,8OAAC,4JAAA,CAAA,UAAM;gCAAC,SAAS;gCAAc,OAAM;gCAAQ,SAAS;0CAAC;;;;;;;;;;;;;;;;;;;;;;;;AAOjE","debugId":null}},
    {"offset": {"line": 198, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dustin/Documents/IOD/PhotoLodge/CapstoneProject/photolodge-app/src/components/EditForm.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport FormControl from \"@mui/material/FormControl\";\r\nimport InputLabel from \"@mui/material/InputLabel\";\r\nimport Select from \"@mui/material/Select\";\r\nimport MenuItem from \"@mui/material/MenuItem\";\r\n\r\nexport default function EditForm({ post, onSave, onClose }) {\r\n  const [title, setTitle] = useState(post.title);\r\n  const [description, setDescription] = useState(post.description);\r\n  const [tags, setTags] = useState(post.tags.join(\", \"));\r\n  const [folders, setFolders] = useState([]);\r\n  const [selectedFolder, setSelectedFolder] = useState(post.folderId || \"\");\r\n\r\n  useEffect(() => {\r\n    const userId = localStorage.getItem(\"userId\");\r\n    fetch(`http://localhost:8080/api/folders/user/${userId}`)\r\n      .then(res => res.json())\r\n      .then(data => setFolders(data.data || []));\r\n  }, []);\r\n\r\n  async function handleEdit(e) {\r\n    e.preventDefault();\r\n    const tagsArray = tags.split(\",\").map(tag => tag.trim()).filter(Boolean);\r\n\r\n    await fetch(`http://localhost:8080/api/posts/${post._id}`, {\r\n      method: \"PUT\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        title,\r\n        description,\r\n        tags: tagsArray,\r\n        folderId: selectedFolder || null,\r\n      }),\r\n    });\r\n\r\n    if (onSave) onSave();\r\n    if (onClose) onClose();\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleEdit}>\r\n      <div style={{ textAlign: \"center\", marginBottom: \"16px\" }}>\r\n        <img\r\n          src={post.imageUrl}\r\n          alt={post.title}\r\n          style={{ maxWidth: \"100%\" }}\r\n        />\r\n      </div>\r\n      <div>\r\n        <label>Title:</label>\r\n        <input value={title} onChange={e => setTitle(e.target.value)} required />\r\n      </div>\r\n      <div>\r\n        <label>Description:</label>\r\n        <textarea value={description} onChange={e => setDescription(e.target.value)} />\r\n      </div>\r\n      <div>\r\n        <label>Tags (comma separated):</label>\r\n        <input value={tags} onChange={e => setTags(e.target.value)} />\r\n      </div>\r\n      <FormControl fullWidth style={{ margin: \"12px 0\" }}>\r\n        <InputLabel id=\"folder-select-label\">Folder</InputLabel>\r\n        <Select\r\n          labelId=\"folder-select-label\"\r\n          value={selectedFolder}\r\n          label=\"Folder\"\r\n          onChange={e => setSelectedFolder(e.target.value)}\r\n        >\r\n          <MenuItem value=\"\">\r\n            <em>None</em>\r\n          </MenuItem>\r\n          {folders.map(folder => (\r\n            <MenuItem key={folder._id} value={folder._id}>\r\n              {folder.name}\r\n            </MenuItem>\r\n          ))}\r\n        </Select>\r\n      </FormControl>\r\n      <button type=\"submit\">Save Changes</button>\r\n    </form>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;;;;;;;AAEe,SAAS,SAAS,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE;IACxD,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,KAAK,KAAK;IAC7C,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,KAAK,WAAW;IAC/D,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,KAAK,IAAI,CAAC,IAAI,CAAC;IAChD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,EAAE;IACzC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,KAAK,QAAQ,IAAI;IAEtE,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,SAAS,aAAa,OAAO,CAAC;QACpC,MAAM,CAAC,uCAAuC,EAAE,QAAQ,EACrD,IAAI,CAAC,CAAA,MAAO,IAAI,IAAI,IACpB,IAAI,CAAC,CAAA,OAAQ,WAAW,KAAK,IAAI,IAAI,EAAE;IAC5C,GAAG,EAAE;IAEL,eAAe,WAAW,CAAC;QACzB,EAAE,cAAc;QAChB,MAAM,YAAY,KAAK,KAAK,CAAC,KAAK,GAAG,CAAC,CAAA,MAAO,IAAI,IAAI,IAAI,MAAM,CAAC;QAEhE,MAAM,MAAM,CAAC,gCAAgC,EAAE,KAAK,GAAG,EAAE,EAAE;YACzD,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBACnB;gBACA;gBACA,MAAM;gBACN,UAAU,kBAAkB;YAC9B;QACF;QAEA,IAAI,QAAQ;QACZ,IAAI,SAAS;IACf;IAEA,qBACE,8OAAC;QAAK,UAAU;;0BACd,8OAAC;gBAAI,OAAO;oBAAE,WAAW;oBAAU,cAAc;gBAAO;0BACtD,cAAA,8OAAC;oBACC,KAAK,KAAK,QAAQ;oBAClB,KAAK,KAAK,KAAK;oBACf,OAAO;wBAAE,UAAU;oBAAO;;;;;;;;;;;0BAG9B,8OAAC;;kCACC,8OAAC;kCAAM;;;;;;kCACP,8OAAC;wBAAM,OAAO;wBAAO,UAAU,CAAA,IAAK,SAAS,EAAE,MAAM,CAAC,KAAK;wBAAG,QAAQ;;;;;;;;;;;;0BAExE,8OAAC;;kCACC,8OAAC;kCAAM;;;;;;kCACP,8OAAC;wBAAS,OAAO;wBAAa,UAAU,CAAA,IAAK,eAAe,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;0BAE5E,8OAAC;;kCACC,8OAAC;kCAAM;;;;;;kCACP,8OAAC;wBAAM,OAAO;wBAAM,UAAU,CAAA,IAAK,QAAQ,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;0BAE3D,8OAAC,sKAAA,CAAA,UAAW;gBAAC,SAAS;gBAAC,OAAO;oBAAE,QAAQ;gBAAS;;kCAC/C,8OAAC,oKAAA,CAAA,UAAU;wBAAC,IAAG;kCAAsB;;;;;;kCACrC,8OAAC,4JAAA,CAAA,UAAM;wBACL,SAAQ;wBACR,OAAO;wBACP,OAAM;wBACN,UAAU,CAAA,IAAK,kBAAkB,EAAE,MAAM,CAAC,KAAK;;0CAE/C,8OAAC,gKAAA,CAAA,UAAQ;gCAAC,OAAM;0CACd,cAAA,8OAAC;8CAAG;;;;;;;;;;;4BAEL,QAAQ,GAAG,CAAC,CAAA,uBACX,8OAAC,gKAAA,CAAA,UAAQ;oCAAkB,OAAO,OAAO,GAAG;8CACzC,OAAO,IAAI;mCADC,OAAO,GAAG;;;;;;;;;;;;;;;;;0BAM/B,8OAAC;gBAAO,MAAK;0BAAS;;;;;;;;;;;;AAG5B","debugId":null}},
    {"offset": {"line": 410, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dustin/Documents/IOD/PhotoLodge/CapstoneProject/photolodge-app/src/components/UploadForm.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport FormControl from \"@mui/material/FormControl\";\r\nimport InputLabel from \"@mui/material/InputLabel\";\r\nimport Select from \"@mui/material/Select\";\r\nimport MenuItem from \"@mui/material/MenuItem\";\r\n\r\nexport default function UploadForm({ onSave, onClose }) {\r\n  const [file, setFile] = useState(null);\r\n  const [name, setName] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [tags, setTags] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [folders, setFolders] = useState([]);\r\n  const [selectedFolder, setSelectedFolder] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const userId = localStorage.getItem(\"userId\");\r\n    fetch(`http://localhost:8080/api/folders/user/${userId}`)\r\n      .then(res => res.json())\r\n      .then(data => setFolders(data.data || []));\r\n  }, []);\r\n\r\n  // Upload image to backend (Cloudinary)\r\n  async function uploadImage(file) {\r\n    const formData = new FormData();\r\n    const userId = localStorage.getItem(\"userId\");\r\n    formData.append(\"userId\", userId); // <-- first\r\n    formData.append(\"image\", file);    // <-- second\r\n\r\n    const res = await fetch(\"http://localhost:8080/api/posts/upload\", {\r\n      method: \"POST\",\r\n      body: formData,\r\n    });\r\n    const data = await res.json();\r\n    return data.imageUrl;\r\n  }\r\n\r\n  // Save post to backend (MongoDB)\r\n  async function savePost(e) {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      const tagsArray = tags.split(\",\").map(tag => tag.trim()).filter(Boolean);\r\n      const imageUrl = await uploadImage(file);\r\n\r\n      const userId = localStorage.getItem(\"userId\");\r\n\r\n      const postData = {\r\n        title: name,\r\n        description,\r\n        tags: tagsArray,\r\n        imageUrl,\r\n        userId,\r\n        folderId: selectedFolder || null, // This will be null if nothing is selected\r\n      };\r\n\r\n      const response = await fetch(\"http://localhost:8080/api/posts/create\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(postData),\r\n      });\r\n      const result = await response.json();\r\n      if (!response.ok) {\r\n        alert(result.error || \"Upload failed!\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      setLoading(false);\r\n      if (onSave) onSave();\r\n      if (onClose) onClose();\r\n    } catch (err) {\r\n      setLoading(false);\r\n      alert(\"Upload failed!\");\r\n      console.error(err);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={savePost}>\r\n      <div>\r\n        <label>Image File:</label>\r\n        <input type=\"file\" accept=\"image/*\" onChange={e => setFile(e.target.files[0])} required />\r\n      </div>\r\n      <div>\r\n        <label>Name:</label>\r\n        <input value={name} onChange={e => setName(e.target.value)} required\r\n        style={{ backgroundColor: \"white\", color: \"black\", borderColor: \"gray\", borderRadius: \"5px\" }} />\r\n      </div>\r\n      <div>\r\n        <label>Description:</label>\r\n        <textarea value={description} onChange={e => setDescription(e.target.value)}\r\n        style={{ backgroundColor: \"white\", color: \"black\", borderColor: \"gray\", borderRadius: \"5px\", borderWidth: \"2px\" }} />\r\n      </div>\r\n      <div>\r\n        <label>Tags (comma separated):</label>\r\n        <input value={tags} onChange={e => setTags(e.target.value)}\r\n        style={{ backgroundColor: \"white\", color: \"black\", borderColor: \"gray\", borderRadius: \"5px\" }} />\r\n      </div>\r\n      <FormControl fullWidth style={{ margin: \"12px 0\" }}>\r\n        <InputLabel id=\"folder-select-label\">Folder</InputLabel>\r\n        <Select\r\n          labelId=\"folder-select-label\"\r\n          value={selectedFolder}\r\n          label=\"Folder\"\r\n          onChange={e => setSelectedFolder(e.target.value)}\r\n        >\r\n          {folders.map(folder => (\r\n            <MenuItem key={folder._id} value={folder._id}>\r\n              {folder.name}\r\n            </MenuItem>\r\n          ))}\r\n        </Select>\r\n      </FormControl>\r\n      <button type=\"submit\" disabled={loading}>{loading ? \"Uploading...\" : \"Save\"}</button>\r\n    </form>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAQe,SAAS,WAAW,EAAE,MAAM,EAAE,OAAO,EAAE;IACpD,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,EAAE;IACzC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAErD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,SAAS,aAAa,OAAO,CAAC;QACpC,MAAM,CAAC,uCAAuC,EAAE,QAAQ,EACrD,IAAI,CAAC,CAAA,MAAO,IAAI,IAAI,IACpB,IAAI,CAAC,CAAA,OAAQ,WAAW,KAAK,IAAI,IAAI,EAAE;IAC5C,GAAG,EAAE;IAEL,uCAAuC;IACvC,eAAe,YAAY,IAAI;QAC7B,MAAM,WAAW,IAAI;QACrB,MAAM,SAAS,aAAa,OAAO,CAAC;QACpC,SAAS,MAAM,CAAC,UAAU,SAAS,YAAY;QAC/C,SAAS,MAAM,CAAC,SAAS,OAAU,aAAa;QAEhD,MAAM,MAAM,MAAM,MAAM,0CAA0C;YAChE,QAAQ;YACR,MAAM;QACR;QACA,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,OAAO,KAAK,QAAQ;IACtB;IAEA,iCAAiC;IACjC,eAAe,SAAS,CAAC;QACvB,EAAE,cAAc;QAChB,WAAW;QAEX,IAAI;YACF,MAAM,YAAY,KAAK,KAAK,CAAC,KAAK,GAAG,CAAC,CAAA,MAAO,IAAI,IAAI,IAAI,MAAM,CAAC;YAChE,MAAM,WAAW,MAAM,YAAY;YAEnC,MAAM,SAAS,aAAa,OAAO,CAAC;YAEpC,MAAM,WAAW;gBACf,OAAO;gBACP;gBACA,MAAM;gBACN;gBACA;gBACA,UAAU,kBAAkB;YAC9B;YAEA,MAAM,WAAW,MAAM,MAAM,0CAA0C;gBACrE,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;YACvB;YACA,MAAM,SAAS,MAAM,SAAS,IAAI;YAClC,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,OAAO,KAAK,IAAI;gBACtB,WAAW;gBACX;YACF;YAEA,WAAW;YACX,IAAI,QAAQ;YACZ,IAAI,SAAS;QACf,EAAE,OAAO,KAAK;YACZ,WAAW;YACX,MAAM;YACN,QAAQ,KAAK,CAAC;QAChB;IACF;IAEA,qBACE,8OAAC;QAAK,UAAU;;0BACd,8OAAC;;kCACC,8OAAC;kCAAM;;;;;;kCACP,8OAAC;wBAAM,MAAK;wBAAO,QAAO;wBAAU,UAAU,CAAA,IAAK,QAAQ,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE;wBAAG,QAAQ;;;;;;;;;;;;0BAEzF,8OAAC;;kCACC,8OAAC;kCAAM;;;;;;kCACP,8OAAC;wBAAM,OAAO;wBAAM,UAAU,CAAA,IAAK,QAAQ,EAAE,MAAM,CAAC,KAAK;wBAAG,QAAQ;wBACpE,OAAO;4BAAE,iBAAiB;4BAAS,OAAO;4BAAS,aAAa;4BAAQ,cAAc;wBAAM;;;;;;;;;;;;0BAE9F,8OAAC;;kCACC,8OAAC;kCAAM;;;;;;kCACP,8OAAC;wBAAS,OAAO;wBAAa,UAAU,CAAA,IAAK,eAAe,EAAE,MAAM,CAAC,KAAK;wBAC1E,OAAO;4BAAE,iBAAiB;4BAAS,OAAO;4BAAS,aAAa;4BAAQ,cAAc;4BAAO,aAAa;wBAAM;;;;;;;;;;;;0BAElH,8OAAC;;kCACC,8OAAC;kCAAM;;;;;;kCACP,8OAAC;wBAAM,OAAO;wBAAM,UAAU,CAAA,IAAK,QAAQ,EAAE,MAAM,CAAC,KAAK;wBACzD,OAAO;4BAAE,iBAAiB;4BAAS,OAAO;4BAAS,aAAa;4BAAQ,cAAc;wBAAM;;;;;;;;;;;;0BAE9F,8OAAC,sKAAA,CAAA,UAAW;gBAAC,SAAS;gBAAC,OAAO;oBAAE,QAAQ;gBAAS;;kCAC/C,8OAAC,oKAAA,CAAA,UAAU;wBAAC,IAAG;kCAAsB;;;;;;kCACrC,8OAAC,4JAAA,CAAA,UAAM;wBACL,SAAQ;wBACR,OAAO;wBACP,OAAM;wBACN,UAAU,CAAA,IAAK,kBAAkB,EAAE,MAAM,CAAC,KAAK;kCAE9C,QAAQ,GAAG,CAAC,CAAA,uBACX,8OAAC,gKAAA,CAAA,UAAQ;gCAAkB,OAAO,OAAO,GAAG;0CACzC,OAAO,IAAI;+BADC,OAAO,GAAG;;;;;;;;;;;;;;;;0BAM/B,8OAAC;gBAAO,MAAK;gBAAS,UAAU;0BAAU,UAAU,iBAAiB;;;;;;;;;;;;AAG3E","debugId":null}},
    {"offset": {"line": 666, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dustin/Documents/IOD/PhotoLodge/CapstoneProject/photolodge-app/src/components/NewFolderForm.jsx"],"sourcesContent":["import * as React from \"react\";\r\nimport TextField from \"@mui/material/TextField\";\r\nimport Button from \"@mui/material/Button\";\r\n\r\nexport default function NewFolderForm({ onSave, onClose }) {\r\n  const [folderName, setFolderName] = React.useState(\"\");\r\n  const [error, setError] = React.useState(\"\");\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    if (!folderName.trim()) {\r\n      setError(\"Folder name is required\");\r\n      return;\r\n    }\r\n    const userId = localStorage.getItem(\"userId\");\r\n    try {\r\n      const res = await fetch(\"http://localhost:8080/api/folders/create\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ name: folderName, userId }),\r\n      });\r\n      if (!res.ok) {\r\n        const data = await res.json();\r\n        setError(data.error || \"Failed to create folder\");\r\n        return;\r\n      }\r\n      const data = await res.json();\r\n      if (onSave) await onSave(data);\r\n      setFolderName(\"\");\r\n      if (onClose) onClose();\r\n    } catch (err) {\r\n      setError(\"Network error\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} style={{ display: \"flex\", flexDirection: \"column\", gap: 16 }}>\r\n      <h2>Create New Folder</h2>\r\n      <TextField\r\n        label=\"Folder Name\"\r\n        value={folderName}\r\n        onChange={e => setFolderName(e.target.value)}\r\n        error={!!error}\r\n        helperText={error}\r\n        autoFocus\r\n      />\r\n      <div style={{ display: \"flex\", justifyContent: \"flex-end\", gap: 8 }}>\r\n        <Button type=\"submit\" variant=\"contained\">\r\n          Create\r\n        </Button>\r\n      </div>\r\n    </form>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;AAEe,SAAS,cAAc,EAAE,MAAM,EAAE,OAAO,EAAE;IACvD,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAc,AAAD,EAAE;IACnD,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAc,AAAD,EAAE;IAEzC,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,SAAS;QACT,IAAI,CAAC,WAAW,IAAI,IAAI;YACtB,SAAS;YACT;QACF;QACA,MAAM,SAAS,aAAa,OAAO,CAAC;QACpC,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,4CAA4C;gBAClE,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,MAAM;oBAAY;gBAAO;YAClD;YACA,IAAI,CAAC,IAAI,EAAE,EAAE;gBACX,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,SAAS,KAAK,KAAK,IAAI;gBACvB;YACF;YACA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,IAAI,QAAQ,MAAM,OAAO;YACzB,cAAc;YACd,IAAI,SAAS;QACf,EAAE,OAAO,KAAK;YACZ,SAAS;QACX;IACF;IAEA,qBACE,8OAAC;QAAK,UAAU;QAAc,OAAO;YAAE,SAAS;YAAQ,eAAe;YAAU,KAAK;QAAG;;0BACvF,8OAAC;0BAAG;;;;;;0BACJ,8OAAC,kKAAA,CAAA,UAAS;gBACR,OAAM;gBACN,OAAO;gBACP,UAAU,CAAA,IAAK,cAAc,EAAE,MAAM,CAAC,KAAK;gBAC3C,OAAO,CAAC,CAAC;gBACT,YAAY;gBACZ,SAAS;;;;;;0BAEX,8OAAC;gBAAI,OAAO;oBAAE,SAAS;oBAAQ,gBAAgB;oBAAY,KAAK;gBAAE;0BAChE,cAAA,8OAAC,4JAAA,CAAA,UAAM;oBAAC,MAAK;oBAAS,SAAQ;8BAAY;;;;;;;;;;;;;;;;;AAMlD","debugId":null}},
    {"offset": {"line": 772, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dustin/Documents/IOD/PhotoLodge/CapstoneProject/photolodge-app/src/components/ImageModal.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport Modal from \"@mui/material/Modal\";\r\nimport Box from \"@mui/material/Box\";\r\nimport ImagePreview from \"./ImagePreview\";\r\nimport EditForm from \"./EditForm\";\r\nimport UploadForm from \"./UploadForm\";\r\nimport NewFolderForm from \"./NewFolderForm\";\r\n\r\nexport default function ImageModal({ open, mode: initialMode = \"preview\", image, onClose, onSave, onDelete }) {\r\n  const [mode, setMode] = useState(initialMode);\r\n\r\n  useEffect(() => {\r\n    if (open) setMode(initialMode);\r\n  }, [open, initialMode]);\r\n\r\n  return (\r\n    <Modal open={open} onClose={onClose}>\r\n      <Box sx={{ background: \"#222\", color: \"#fff\", p: 4, borderRadius: 2, maxWidth: 500, mx: \"auto\", mt: 10 }}>\r\n        {/* Debug line, optional: */}\r\n        {/* <div>Current mode: {mode}</div> */}\r\n        {mode === \"preview\" && image && (\r\n          <ImagePreview\r\n            image={image}\r\n            onEdit={() => setMode(\"edit\")}\r\n            onDelete={onDelete}\r\n            onClose={onClose}\r\n          />\r\n        )}\r\n        {mode === \"edit\" && image && (\r\n          <EditForm\r\n            post={image}\r\n            onSave={() => {\r\n              setMode(\"preview\");\r\n              if (onSave) onSave();\r\n            }}\r\n            onClose={() => setMode(\"preview\")}\r\n          />\r\n        )}\r\n        {mode === \"upload\" && (\r\n          <UploadForm\r\n            onSave={() => {\r\n              setMode(\"preview\");\r\n              if (onSave) onSave();\r\n            }}\r\n            onClose={() => setMode(\"preview\")}\r\n          />\r\n        )}\r\n        {mode === \"newFolder\" && (\r\n          <NewFolderForm\r\n            onSave={() => {\r\n              setMode(\"preview\");\r\n              if (onSave) onSave();\r\n            }}\r\n            onClose={() => setMode(\"preview\")}\r\n          />\r\n        )}\r\n      </Box>\r\n    </Modal>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AAEe,SAAS,WAAW,EAAE,IAAI,EAAE,MAAM,cAAc,SAAS,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE,QAAQ,EAAE;IAC1G,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEjC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,MAAM,QAAQ;IACpB,GAAG;QAAC;QAAM;KAAY;IAEtB,qBACE,8OAAC,0JAAA,CAAA,UAAK;QAAC,MAAM;QAAM,SAAS;kBAC1B,cAAA,8OAAC,sJAAA,CAAA,UAAG;YAAC,IAAI;gBAAE,YAAY;gBAAQ,OAAO;gBAAQ,GAAG;gBAAG,cAAc;gBAAG,UAAU;gBAAK,IAAI;gBAAQ,IAAI;YAAG;;gBAGpG,SAAS,aAAa,uBACrB,8OAAC,kIAAA,CAAA,UAAY;oBACX,OAAO;oBACP,QAAQ,IAAM,QAAQ;oBACtB,UAAU;oBACV,SAAS;;;;;;gBAGZ,SAAS,UAAU,uBAClB,8OAAC,8HAAA,CAAA,UAAQ;oBACP,MAAM;oBACN,QAAQ;wBACN,QAAQ;wBACR,IAAI,QAAQ;oBACd;oBACA,SAAS,IAAM,QAAQ;;;;;;gBAG1B,SAAS,0BACR,8OAAC,gIAAA,CAAA,UAAU;oBACT,QAAQ;wBACN,QAAQ;wBACR,IAAI,QAAQ;oBACd;oBACA,SAAS,IAAM,QAAQ;;;;;;gBAG1B,SAAS,6BACR,8OAAC,mIAAA,CAAA,UAAa;oBACZ,QAAQ;wBACN,QAAQ;wBACR,IAAI,QAAQ;oBACd;oBACA,SAAS,IAAM,QAAQ;;;;;;;;;;;;;;;;;AAMnC","debugId":null}},
    {"offset": {"line": 875, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dustin/Documents/IOD/PhotoLodge/CapstoneProject/photolodge-app/src/app/folder/%5BfolderId%5D/page.jsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport ImageModal from \"../../../components/ImageModal\";\r\nimport IconButton from \"@mui/material/IconButton\";\r\nimport DeleteOutlineRoundedIcon from \"@mui/icons-material/DeleteOutlineRounded\";\r\nimport Dialog from \"@mui/material/Dialog\";\r\nimport DialogActions from \"@mui/material/DialogActions\";\r\nimport DialogContent from \"@mui/material/DialogContent\";\r\nimport DialogContentText from \"@mui/material/DialogContentText\";\r\nimport DialogTitle from \"@mui/material/DialogTitle\";\r\nimport Button from \"@mui/material/Button\";\r\n\r\nexport default function FolderImagesPage() {\r\n  const { folderId } = useParams();\r\n  const router = useRouter();\r\n  const [images, setImages] = useState([]);\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [modalMode, setModalMode] = useState(\"preview\");\r\n  const [selectedImage, setSelectedImage] = useState(null);\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetch(`http://localhost:8080/api/posts/folder/${folderId}`)\r\n      .then(res => res.json())\r\n      .then(data => setImages(data.data || []));\r\n  }, [folderId]);\r\n\r\n  const handleImageClick = (img) => {\r\n    setSelectedImage(img);\r\n    setModalMode(\"preview\");\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const handleEdit = () => {\r\n    setModalMode(\"edit\");\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (!selectedImage) return;\r\n    if (!window.confirm(\"Are you sure you want to delete this image?\")) return;\r\n    await fetch(`http://localhost:8080/api/posts/${selectedImage._id}`, {\r\n      method: \"DELETE\",\r\n    });\r\n    setImages(images.filter(img => img._id !== selectedImage._id));\r\n    setModalOpen(false);\r\n  };\r\n\r\n  const handleSave = () => {\r\n    // After editing, refresh images\r\n    fetch(`http://localhost:8080/api/posts/folder/${folderId}`)\r\n      .then(res => res.json())\r\n      .then(data => setImages(data.data || []));\r\n    setModalOpen(false);\r\n  };\r\n\r\n  // Delete the folder\r\n  const handleDeleteFolder = async () => {\r\n    await fetch(`http://localhost:8080/api/folders/${folderId}`, {\r\n      method: \"DELETE\",\r\n    });\r\n    router.push(\"/\");\r\n  };\r\n\r\n  return (\r\n    <div style={{ position: \"relative\" }}>\r\n      {/* Trashcan icon in top right */}\r\n      <IconButton\r\n        onClick={() => setDialogOpen(true)}\r\n        style={{ position: \"absolute\", top: 8, right: 8, zIndex: 10, color: \"#b71c1c\" }}\r\n        aria-label=\"Delete Folder\"\r\n      >\r\n        <DeleteOutlineRoundedIcon fontSize=\"large\" />\r\n      </IconButton>\r\n      <Dialog\r\n        open={dialogOpen}\r\n        onClose={() => setDialogOpen(false)}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">{\"Delete Folder?\"}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            Are you sure you want to delete this folder (Contained images will not be deleted)? This action cannot be undone.\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setDialogOpen(false)}>Cancel</Button>\r\n          <Button\r\n            onClick={async () => {\r\n              setDialogOpen(false);\r\n              await handleDeleteFolder();\r\n            }}\r\n            color=\"error\"\r\n            autoFocus\r\n          >\r\n            Delete\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n      <h2>Images in this Folder</h2>\r\n      <div style={{ display: \"flex\", flexWrap: \"wrap\", gap: \"16px\" }}>\r\n        {images.map(img => (\r\n          <img\r\n            key={img._id}\r\n            src={img.imageUrl}\r\n            alt={img.title}\r\n            style={{ width: 200, height: 200, objectFit: \"cover\", cursor: \"pointer\" }}\r\n            onClick={() => handleImageClick(img)}\r\n          />\r\n        ))}\r\n      </div>\r\n      <ImageModal\r\n        open={modalOpen}\r\n        mode={modalMode}\r\n        image={selectedImage}\r\n        onClose={() => setModalOpen(false)}\r\n        onEdit={handleEdit}\r\n        onDelete={handleDelete}\r\n        onSave={handleSave}\r\n      />\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}