{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dustin/Documents/IOD/PhotoLodge/MiniProject2/photolodge-app/src/components/ImageGallery.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport ImageModal from \"./ImageModal\";\r\nimport FloatingActionButton from \"./FloatingActionButton.jsx\";\r\n\r\nexport default function ImageGallery() {\r\n  const [images, setImages] = useState([]);\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [modalMode, setModalMode] = useState(\"preview\"); // \"preview\" or \"upload\"\r\n  const [selectedImage, setSelectedImage] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const saved = localStorage.getItem(\"images\");\r\n    if (saved) {\r\n      setImages(JSON.parse(saved));\r\n    } else {\r\n      fetch(\"/images.json\")\r\n        .then(res => res.json())\r\n        .then(data => {\r\n          setImages(data);\r\n          localStorage.setItem(\"images\", JSON.stringify(data));\r\n        });\r\n    }\r\n  }, []);\r\n\r\n  const handleImageClick = (img) => {\r\n    setSelectedImage(img);\r\n    setModalMode(\"preview\");\r\n    setModalOpen(true);\r\n  };\r\n\r\n  function handleSaveImage(newImage) {\r\n    if (newImage.file) {\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        const updatedImages = [\r\n          ...images,\r\n          {\r\n            ...newImage,\r\n            id: images.length + 1,\r\n            src: e.target.result\r\n          }\r\n        ];\r\n        setImages(updatedImages);\r\n        localStorage.setItem(\"images\", JSON.stringify(updatedImages));\r\n      };\r\n      reader.readAsDataURL(newImage.file);\r\n    }\r\n  }\r\n\r\n  const handleUploadClick = () => {\r\n    setSelectedImage(null);\r\n    setModalMode(\"upload\");\r\n    setModalOpen(true);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div style={{\r\n        display: \"flex\",\r\n        flexWrap: \"wrap\",\r\n        gap: \"16px\"\r\n      }}>\r\n        {images.map((img) => (\r\n          <div\r\n            key={img.id}\r\n            style={{ width: \"200px\", height: \"200px\", overflow: \"hidden\", borderRadius: \"8px\", cursor: \"pointer\" }}\r\n            onClick={() => handleImageClick(img)}\r\n          >\r\n            <img\r\n              src={img.src}\r\n              alt={img.name}\r\n              style={{ width: \"100%\", height: \"100%\", objectFit: \"cover\" }}\r\n            />\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <ImageModal\r\n        open={modalOpen}\r\n        mode={modalMode}\r\n        image={selectedImage}\r\n        onClose={() => setModalOpen(false)}\r\n        onSave={handleSaveImage}\r\n      />\r\n      <div style={{ position: \"fixed\", bottom: 32, right: 32 }}>\r\n        <FloatingActionButton onClick={handleUploadClick} />\r\n      </div>\r\n    </>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,EAAE;IACvC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,YAAY,wBAAwB;IAC/E,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEnD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,IAAI,OAAO;YACT,UAAU,KAAK,KAAK,CAAC;QACvB,OAAO;YACL,MAAM,gBACH,IAAI,CAAC,CAAA,MAAO,IAAI,IAAI,IACpB,IAAI,CAAC,CAAA;gBACJ,UAAU;gBACV,aAAa,OAAO,CAAC,UAAU,KAAK,SAAS,CAAC;YAChD;QACJ;IACF,GAAG,EAAE;IAEL,MAAM,mBAAmB,CAAC;QACxB,iBAAiB;QACjB,aAAa;QACb,aAAa;IACf;IAEA,SAAS,gBAAgB,QAAQ;QAC/B,IAAI,SAAS,IAAI,EAAE;YACjB,MAAM,SAAS,IAAI;YACnB,OAAO,MAAM,GAAG,CAAC;gBACf,MAAM,gBAAgB;uBACjB;oBACH;wBACE,GAAG,QAAQ;wBACX,IAAI,OAAO,MAAM,GAAG;wBACpB,KAAK,EAAE,MAAM,CAAC,MAAM;oBACtB;iBACD;gBACD,UAAU;gBACV,aAAa,OAAO,CAAC,UAAU,KAAK,SAAS,CAAC;YAChD;YACA,OAAO,aAAa,CAAC,SAAS,IAAI;QACpC;IACF;IAEA,MAAM,oBAAoB;QACxB,iBAAiB;QACjB,aAAa;QACb,aAAa;IACf;IAEA,qBACE;;0BACE,8OAAC;gBAAI,OAAO;oBACV,SAAS;oBACT,UAAU;oBACV,KAAK;gBACP;0BACG,OAAO,GAAG,CAAC,CAAC,oBACX,8OAAC;wBAEC,OAAO;4BAAE,OAAO;4BAAS,QAAQ;4BAAS,UAAU;4BAAU,cAAc;4BAAO,QAAQ;wBAAU;wBACrG,SAAS,IAAM,iBAAiB;kCAEhC,cAAA,8OAAC;4BACC,KAAK,IAAI,GAAG;4BACZ,KAAK,IAAI,IAAI;4BACb,OAAO;gCAAE,OAAO;gCAAQ,QAAQ;gCAAQ,WAAW;4BAAQ;;;;;;uBAPxD,IAAI,EAAE;;;;;;;;;;0BAYjB,8OAAC,gIAAA,CAAA,UAAU;gBACT,MAAM;gBACN,MAAM;gBACN,OAAO;gBACP,SAAS,IAAM,aAAa;gBAC5B,QAAQ;;;;;;0BAEV,8OAAC;gBAAI,OAAO;oBAAE,UAAU;oBAAS,QAAQ;oBAAI,OAAO;gBAAG;0BACrD,cAAA,8OAAC,0IAAA,CAAA,UAAoB;oBAAC,SAAS;;;;;;;;;;;;;AAIvC","debugId":null}}]
}