{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dustin/Documents/IOD/PhotoLodge/photolodge-app/src/components/ImagePreview.jsx"],"sourcesContent":["import EditRoundedIcon from '@mui/icons-material/EditRounded';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport Button from '@mui/material/Button';\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogContentText from '@mui/material/DialogContentText';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport { useState } from \"react\";\r\n\r\nexport default function ImagePreview({ image, onClose, onEdit, onDelete }) {\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n\r\n  if (!image) return null;\r\n\r\n  const handleDelete = async () => {\r\n    await fetch(`http://localhost:8080/api/posts/${image._id}`, { method: \"DELETE\" });\r\n    if (onDelete) onDelete();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n  <img src={image.imageUrl} alt={image.title} style={{ maxWidth: \"100%\" }} tabIndex={-1} />\r\n      <h2>{image.title}</h2>\r\n      <div style={{ display: 'flex', flexWrap: 'wrap', gap: 6, margin: '8px 0' }}>\r\n        {image.tags?.map((tag, i) => (\r\n          <span\r\n            key={tag + i}\r\n            style={{\r\n              background: '#111',\r\n              color: '#e3e3e3',\r\n              borderRadius: 6,\r\n              padding: '2px 8px',\r\n              fontSize: 13,\r\n              fontWeight: 500,\r\n              marginRight: 2,\r\n              marginBottom: 2,\r\n              display: 'inline-block',\r\n              letterSpacing: 0.2\r\n            }}\r\n          >\r\n            #{tag}\r\n          </span>\r\n        ))}\r\n      </div>\r\n      <p>{image.description}</p>\r\n      <br/>\r\n      <div style={{display: \"flex\", justifyContent: \"center\"}}>\r\n        <Button onClick={onEdit} style={{color: \"tan\"}}>\r\n          <EditRoundedIcon />\r\n        </Button>\r\n        <Button\r\n          onClick={() => setDialogOpen(true)}\r\n          style={{color: \"tan\"}}\r\n        >\r\n          <DeleteIcon />\r\n        </Button>\r\n      </div>\r\n      <Dialog\r\n        open={dialogOpen}\r\n        onClose={() => setDialogOpen(false)}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">{\"Delete Image?\"}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            Are you sure you want to delete this image? This action cannot be undone.\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setDialogOpen(false)}>Cancel</Button>\r\n          <Button onClick={handleDelete} color=\"error\" autoFocus>\r\n            Delete\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AAEe,SAAS,aAAa,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE,QAAQ,EAAE;;IACvE,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAE7C,IAAI,CAAC,OAAO,OAAO;IAEnB,MAAM,eAAe;QACnB,MAAM,MAAM,CAAC,gCAAgC,EAAE,MAAM,GAAG,EAAE,EAAE;YAAE,QAAQ;QAAS;QAC/E,IAAI,UAAU;IAChB;IAEA,qBACE,6LAAC;;0BACH,6LAAC;gBAAI,KAAK,MAAM,QAAQ;gBAAE,KAAK,MAAM,KAAK;gBAAE,OAAO;oBAAE,UAAU;gBAAO;gBAAG,UAAU,CAAC;;;;;;0BAChF,6LAAC;0BAAI,MAAM,KAAK;;;;;;0BAChB,6LAAC;gBAAI,OAAO;oBAAE,SAAS;oBAAQ,UAAU;oBAAQ,KAAK;oBAAG,QAAQ;gBAAQ;0BACtE,MAAM,IAAI,EAAE,IAAI,CAAC,KAAK,kBACrB,6LAAC;wBAEC,OAAO;4BACL,YAAY;4BACZ,OAAO;4BACP,cAAc;4BACd,SAAS;4BACT,UAAU;4BACV,YAAY;4BACZ,aAAa;4BACb,cAAc;4BACd,SAAS;4BACT,eAAe;wBACjB;;4BACD;4BACG;;uBAdG,MAAM;;;;;;;;;;0BAkBjB,6LAAC;0BAAG,MAAM,WAAW;;;;;;0BACrB,6LAAC;;;;;0BACD,6LAAC;gBAAI,OAAO;oBAAC,SAAS;oBAAQ,gBAAgB;gBAAQ;;kCACpD,6LAAC,+JAAA,CAAA,UAAM;wBAAC,SAAS;wBAAQ,OAAO;4BAAC,OAAO;wBAAK;kCAC3C,cAAA,6LAAC,mKAAA,CAAA,UAAe;;;;;;;;;;kCAElB,6LAAC,+JAAA,CAAA,UAAM;wBACL,SAAS,IAAM,cAAc;wBAC7B,OAAO;4BAAC,OAAO;wBAAK;kCAEpB,cAAA,6LAAC,8JAAA,CAAA,UAAU;;;;;;;;;;;;;;;;0BAGf,6LAAC,+JAAA,CAAA,UAAM;gBACL,MAAM;gBACN,SAAS,IAAM,cAAc;gBAC7B,mBAAgB;gBAChB,oBAAiB;;kCAEjB,6LAAC,yKAAA,CAAA,UAAW;wBAAC,IAAG;kCAAsB;;;;;;kCACtC,6LAAC,6KAAA,CAAA,UAAa;kCACZ,cAAA,6LAAC,qLAAA,CAAA,UAAiB;4BAAC,IAAG;sCAA2B;;;;;;;;;;;kCAInD,6LAAC,6KAAA,CAAA,UAAa;;0CACZ,6LAAC,+JAAA,CAAA,UAAM;gCAAC,SAAS,IAAM,cAAc;0CAAQ;;;;;;0CAC7C,6LAAC,+JAAA,CAAA,UAAM;gCAAC,SAAS;gCAAc,OAAM;gCAAQ,SAAS;0CAAC;;;;;;;;;;;;;;;;;;;;;;;;AAOjE;GArEwB;KAAA","debugId":null}},
    {"offset": {"line": 230, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dustin/Documents/IOD/PhotoLodge/photolodge-app/src/components/EditForm.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport FormControl from \"@mui/material/FormControl\";\r\nimport InputLabel from \"@mui/material/InputLabel\";\r\nimport Select from \"@mui/material/Select\";\r\nimport MenuItem from \"@mui/material/MenuItem\";\r\nimport TextField from \"@mui/material/TextField\";\r\nimport Button from \"@mui/material/Button\";\r\n\r\nexport default function EditForm({ post, onSave, onClose }) {\r\n  const [title, setTitle] = useState(post.title);\r\n  const [description, setDescription] = useState(post.description);\r\n  const [tags, setTags] = useState(post.tags.join(\", \"));\r\n  const [folders, setFolders] = useState([]);\r\n  const [selectedFolder, setSelectedFolder] = useState(post.folderId || \"\");\r\n\r\n  useEffect(() => {\r\n    const userId = localStorage.getItem(\"userId\");\r\n    fetch(`http://localhost:8080/api/folders/user/${userId}`)\r\n      .then(res => res.json())\r\n      .then(data => setFolders(data.data || []));\r\n  }, []);\r\n\r\n  async function handleEdit(e) {\r\n    e.preventDefault();\r\n    const tagsArray = tags.split(\",\").map(tag => tag.trim()).filter(Boolean);\r\n\r\n    await fetch(`http://localhost:8080/api/posts/${post._id}`, {\r\n      method: \"PUT\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        title,\r\n        description,\r\n        tags: tagsArray,\r\n        folderId: selectedFolder || null,\r\n      }),\r\n    });\r\n\r\n    if (onSave) onSave();\r\n    if (onClose) onClose();\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleEdit} style={{ display: 'flex', flexDirection: 'column', gap: 18 }}>\r\n      <img\r\n        src={post.imageUrl}\r\n        alt={post.title}\r\n        style={{ maxWidth: '100%', maxHeight: 200, borderRadius: 8, marginBottom: 8, alignSelf: 'center' }}\r\n      />\r\n      <TextField\r\n        label=\"Title\"\r\n        value={title}\r\n        onChange={e => setTitle(e.target.value)}\r\n        required\r\n        variant=\"outlined\"\r\n        fullWidth\r\n      />\r\n      <TextField\r\n        label=\"Description\"\r\n        value={description}\r\n        onChange={e => setDescription(e.target.value)}\r\n        multiline\r\n        minRows={2}\r\n        variant=\"outlined\"\r\n        fullWidth\r\n      />\r\n      <TextField\r\n        label=\"Tags (comma separated)\"\r\n        value={tags}\r\n        onChange={e => setTags(e.target.value)}\r\n        variant=\"outlined\"\r\n        fullWidth\r\n      />\r\n      <FormControl fullWidth style={{ margin: \"12px 0\" }}>\r\n        <InputLabel id=\"folder-select-label\">Folder</InputLabel>\r\n        <Select\r\n          labelId=\"folder-select-label\"\r\n          value={selectedFolder}\r\n          label=\"Folder\"\r\n          onChange={e => setSelectedFolder(e.target.value)}\r\n        >\r\n          <MenuItem value=\"\">\r\n            <em>None</em>\r\n          </MenuItem>\r\n          {folders.map(folder => (\r\n            <MenuItem key={folder._id} value={folder._id}>\r\n              {folder.name}\r\n            </MenuItem>\r\n          ))}\r\n        </Select>\r\n      </FormControl>\r\n      <Button type=\"submit\" variant=\"contained\" color=\"primary\">\r\n        Save Changes\r\n      </Button>\r\n    </form>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 428, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dustin/Documents/IOD/PhotoLodge/photolodge-app/src/components/UploadForm.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport FormControl from \"@mui/material/FormControl\";\r\nimport InputLabel from \"@mui/material/InputLabel\";\r\nimport Select from \"@mui/material/Select\";\r\nimport MenuItem from \"@mui/material/MenuItem\";\r\nimport TextField from \"@mui/material/TextField\";\r\nimport Button from \"@mui/material/Button\";\r\n\r\nexport default function UploadForm({ onSave, onClose }) {\r\n  const [file, setFile] = useState(null);\r\n  const [previewUrl, setPreviewUrl] = useState(null);\r\n  const [name, setName] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [tags, setTags] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [folders, setFolders] = useState([]);\r\n  const [selectedFolder, setSelectedFolder] = useState(\"\");\r\n  // Show image preview when file changes\r\n  useEffect(() => {\r\n    if (!file) {\r\n      setPreviewUrl(null);\r\n      return;\r\n    }\r\n    const url = URL.createObjectURL(file);\r\n    setPreviewUrl(url);\r\n    return () => URL.revokeObjectURL(url);\r\n  }, [file]);\r\n  useEffect(() => {\r\n    const userId = localStorage.getItem(\"userId\");\r\n    fetch(`http://localhost:8080/api/folders/user/${userId}`)\r\n      .then(res => res.json())\r\n      .then(data => setFolders(data.data || []));\r\n  }, []);\r\n\r\n  // Upload image to backend (Cloudinary)\r\n  async function uploadImage(file) {\r\n    const formData = new FormData();\r\n    const userId = localStorage.getItem(\"userId\");\r\n    formData.append(\"userId\", userId); // <-- first\r\n    formData.append(\"image\", file);    // <-- second\r\n\r\n    const res = await fetch(\"http://localhost:8080/api/posts/upload\", {\r\n      method: \"POST\",\r\n      body: formData,\r\n    });\r\n    const data = await res.json();\r\n    return data.imageUrl;\r\n  }\r\n\r\n  // Save post to backend (MongoDB)\r\n  async function savePost(e) {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      const tagsArray = tags.split(\",\").map(tag => tag.trim()).filter(Boolean);\r\n      const imageUrl = await uploadImage(file);\r\n\r\n      const userId = localStorage.getItem(\"userId\");\r\n\r\n      const postData = {\r\n        title: name,\r\n        description,\r\n        tags: tagsArray,\r\n        imageUrl,\r\n        userId,\r\n        folderId: selectedFolder || null, // This will be null if nothing is selected\r\n      };\r\n\r\n      const response = await fetch(\"http://localhost:8080/api/posts/create\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(postData),\r\n      });\r\n      const result = await response.json();\r\n      if (!response.ok) {\r\n        alert(result.error || \"Upload failed!\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      setLoading(false);\r\n      if (onSave) onSave();\r\n      if (onClose) onClose();\r\n    } catch (err) {\r\n      setLoading(false);\r\n      alert(\"Upload failed!\");\r\n      console.error(err);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={savePost} style={{ display: 'flex', flexDirection: 'column', gap: 18 }}>\r\n      <h2 style={{ textAlign: 'center' }}>Upload New Image</h2>\r\n      {previewUrl && (\r\n        <img\r\n          src={previewUrl}\r\n          alt=\"Preview\"\r\n          style={{ maxWidth: '100%', maxHeight: 200, borderRadius: 8, marginBottom: 8, alignSelf: 'center' }}\r\n        />\r\n      )}\r\n      <Button\r\n        variant=\"outlined\"\r\n        component=\"label\"\r\n        sx={{ alignSelf: 'center', mt: 1, mb: 1 }}\r\n      >\r\n        Upload Image File\r\n        <input\r\n          type=\"file\"\r\n          accept=\"image/*\"\r\n          hidden\r\n          onChange={e => setFile(e.target.files[0])}\r\n          required\r\n        />\r\n      </Button>\r\n      <TextField\r\n        label=\"Name\"\r\n        value={name}\r\n        onChange={e => setName(e.target.value)}\r\n        required\r\n        variant=\"outlined\"\r\n        fullWidth\r\n      />\r\n      <TextField\r\n        label=\"Description\"\r\n        value={description}\r\n        onChange={e => setDescription(e.target.value)}\r\n        multiline\r\n        minRows={2}\r\n        variant=\"outlined\"\r\n        fullWidth\r\n      />\r\n      <TextField\r\n        label=\"Tags (comma separated)\"\r\n        value={tags}\r\n        onChange={e => setTags(e.target.value)}\r\n        variant=\"outlined\"\r\n        fullWidth\r\n      />\r\n      <FormControl fullWidth style={{ margin: \"12px 0\" }}>\r\n        <InputLabel id=\"folder-select-label\">Folder</InputLabel>\r\n        <Select\r\n          labelId=\"folder-select-label\"\r\n          value={selectedFolder}\r\n          label=\"Folder\"\r\n          onChange={e => setSelectedFolder(e.target.value)}\r\n        >\r\n          {folders.map(folder => (\r\n            <MenuItem key={folder._id} value={folder._id}>\r\n              {folder.name}\r\n            </MenuItem>\r\n          ))}\r\n        </Select>\r\n      </FormControl>\r\n      <Button type=\"submit\" variant=\"contained\" color=\"primary\" disabled={loading}>\r\n        {loading ? \"Uploading...\" : \"Save\"}\r\n      </Button>\r\n    </form>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AARA;;;;;;;;AAUe,SAAS,WAAW,EAAE,MAAM,EAAE,OAAO,EAAE;;IACpD,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE,EAAE;IACzC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACrD,uCAAuC;IACvC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;gCAAE;YACR,IAAI,CAAC,MAAM;gBACT,cAAc;gBACd;YACF;YACA,MAAM,MAAM,IAAI,eAAe,CAAC;YAChC,cAAc;YACd;wCAAO,IAAM,IAAI,eAAe,CAAC;;QACnC;+BAAG;QAAC;KAAK;IACT,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;gCAAE;YACR,MAAM,SAAS,aAAa,OAAO,CAAC;YACpC,MAAM,CAAC,uCAAuC,EAAE,QAAQ,EACrD,IAAI;wCAAC,CAAA,MAAO,IAAI,IAAI;uCACpB,IAAI;wCAAC,CAAA,OAAQ,WAAW,KAAK,IAAI,IAAI,EAAE;;QAC5C;+BAAG,EAAE;IAEL,uCAAuC;IACvC,eAAe,YAAY,IAAI;QAC7B,MAAM,WAAW,IAAI;QACrB,MAAM,SAAS,aAAa,OAAO,CAAC;QACpC,SAAS,MAAM,CAAC,UAAU,SAAS,YAAY;QAC/C,SAAS,MAAM,CAAC,SAAS,OAAU,aAAa;QAEhD,MAAM,MAAM,MAAM,MAAM,0CAA0C;YAChE,QAAQ;YACR,MAAM;QACR;QACA,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,OAAO,KAAK,QAAQ;IACtB;IAEA,iCAAiC;IACjC,eAAe,SAAS,CAAC;QACvB,EAAE,cAAc;QAChB,WAAW;QAEX,IAAI;YACF,MAAM,YAAY,KAAK,KAAK,CAAC,KAAK,GAAG,CAAC,CAAA,MAAO,IAAI,IAAI,IAAI,MAAM,CAAC;YAChE,MAAM,WAAW,MAAM,YAAY;YAEnC,MAAM,SAAS,aAAa,OAAO,CAAC;YAEpC,MAAM,WAAW;gBACf,OAAO;gBACP;gBACA,MAAM;gBACN;gBACA;gBACA,UAAU,kBAAkB;YAC9B;YAEA,MAAM,WAAW,MAAM,MAAM,0CAA0C;gBACrE,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;YACvB;YACA,MAAM,SAAS,MAAM,SAAS,IAAI;YAClC,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,OAAO,KAAK,IAAI;gBACtB,WAAW;gBACX;YACF;YAEA,WAAW;YACX,IAAI,QAAQ;YACZ,IAAI,SAAS;QACf,EAAE,OAAO,KAAK;YACZ,WAAW;YACX,MAAM;YACN,QAAQ,KAAK,CAAC;QAChB;IACF;IAEA,qBACE,6LAAC;QAAK,UAAU;QAAU,OAAO;YAAE,SAAS;YAAQ,eAAe;YAAU,KAAK;QAAG;;0BACnF,6LAAC;gBAAG,OAAO;oBAAE,WAAW;gBAAS;0BAAG;;;;;;YACnC,4BACC,6LAAC;gBACC,KAAK;gBACL,KAAI;gBACJ,OAAO;oBAAE,UAAU;oBAAQ,WAAW;oBAAK,cAAc;oBAAG,cAAc;oBAAG,WAAW;gBAAS;;;;;;0BAGrG,6LAAC,+JAAA,CAAA,UAAM;gBACL,SAAQ;gBACR,WAAU;gBACV,IAAI;oBAAE,WAAW;oBAAU,IAAI;oBAAG,IAAI;gBAAE;;oBACzC;kCAEC,6LAAC;wBACC,MAAK;wBACL,QAAO;wBACP,MAAM;wBACN,UAAU,CAAA,IAAK,QAAQ,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE;wBACxC,QAAQ;;;;;;;;;;;;0BAGZ,6LAAC,qKAAA,CAAA,UAAS;gBACR,OAAM;gBACN,OAAO;gBACP,UAAU,CAAA,IAAK,QAAQ,EAAE,MAAM,CAAC,KAAK;gBACrC,QAAQ;gBACR,SAAQ;gBACR,SAAS;;;;;;0BAEX,6LAAC,qKAAA,CAAA,UAAS;gBACR,OAAM;gBACN,OAAO;gBACP,UAAU,CAAA,IAAK,eAAe,EAAE,MAAM,CAAC,KAAK;gBAC5C,SAAS;gBACT,SAAS;gBACT,SAAQ;gBACR,SAAS;;;;;;0BAEX,6LAAC,qKAAA,CAAA,UAAS;gBACR,OAAM;gBACN,OAAO;gBACP,UAAU,CAAA,IAAK,QAAQ,EAAE,MAAM,CAAC,KAAK;gBACrC,SAAQ;gBACR,SAAS;;;;;;0BAEX,6LAAC,yKAAA,CAAA,UAAW;gBAAC,SAAS;gBAAC,OAAO;oBAAE,QAAQ;gBAAS;;kCAC/C,6LAAC,uKAAA,CAAA,UAAU;wBAAC,IAAG;kCAAsB;;;;;;kCACrC,6LAAC,+JAAA,CAAA,UAAM;wBACL,SAAQ;wBACR,OAAO;wBACP,OAAM;wBACN,UAAU,CAAA,IAAK,kBAAkB,EAAE,MAAM,CAAC,KAAK;kCAE9C,QAAQ,GAAG,CAAC,CAAA,uBACX,6LAAC,mKAAA,CAAA,UAAQ;gCAAkB,OAAO,OAAO,GAAG;0CACzC,OAAO,IAAI;+BADC,OAAO,GAAG;;;;;;;;;;;;;;;;0BAM/B,6LAAC,+JAAA,CAAA,UAAM;gBAAC,MAAK;gBAAS,SAAQ;gBAAY,OAAM;gBAAU,UAAU;0BACjE,UAAU,iBAAiB;;;;;;;;;;;;AAIpC;GAvJwB;KAAA","debugId":null}},
    {"offset": {"line": 701, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dustin/Documents/IOD/PhotoLodge/photolodge-app/src/components/NewFolderForm.jsx"],"sourcesContent":["import * as React from \"react\";\r\nimport TextField from \"@mui/material/TextField\";\r\nimport Button from \"@mui/material/Button\";\r\n\r\nexport default function NewFolderForm({ onSave, onClose }) {\r\n  const [folderName, setFolderName] = React.useState(\"\");\r\n  const [error, setError] = React.useState(\"\");\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    if (!folderName.trim()) {\r\n      setError(\"Folder name is required\");\r\n      return;\r\n    }\r\n    const userId = localStorage.getItem(\"userId\");\r\n    try {\r\n      const res = await fetch(\"http://localhost:8080/api/folders/create\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ name: folderName, userId }),\r\n      });\r\n      if (!res.ok) {\r\n        const data = await res.json();\r\n        setError(data.error || \"Failed to create folder\");\r\n        return;\r\n      }\r\n      const data = await res.json();\r\n      if (onSave) await onSave(data);\r\n      setFolderName(\"\");\r\n      if (onClose) onClose();\r\n    } catch (err) {\r\n      setError(\"Network error\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} style={{ display: \"flex\", flexDirection: \"column\", gap: 16 }}>\r\n      <h2>Create New Folder</h2>\r\n      <TextField\r\n        label=\"Folder Name\"\r\n        value={folderName}\r\n        onChange={e => setFolderName(e.target.value)}\r\n        error={!!error}\r\n        helperText={error}\r\n        autoFocus\r\n      />\r\n      <div style={{ display: \"flex\", justifyContent: \"flex-end\", gap: 8 }}>\r\n        <Button type=\"submit\" variant=\"contained\">\r\n          Create\r\n        </Button>\r\n      </div>\r\n    </form>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;AAEe,SAAS,cAAc,EAAE,MAAM,EAAE,OAAO,EAAE;;IACvD,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAc,AAAD,EAAE;IACnD,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAc,AAAD,EAAE;IAEzC,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,SAAS;QACT,IAAI,CAAC,WAAW,IAAI,IAAI;YACtB,SAAS;YACT;QACF;QACA,MAAM,SAAS,aAAa,OAAO,CAAC;QACpC,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,4CAA4C;gBAClE,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,MAAM;oBAAY;gBAAO;YAClD;YACA,IAAI,CAAC,IAAI,EAAE,EAAE;gBACX,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,SAAS,KAAK,KAAK,IAAI;gBACvB;YACF;YACA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,IAAI,QAAQ,MAAM,OAAO;YACzB,cAAc;YACd,IAAI,SAAS;QACf,EAAE,OAAO,KAAK;YACZ,SAAS;QACX;IACF;IAEA,qBACE,6LAAC;QAAK,UAAU;QAAc,OAAO;YAAE,SAAS;YAAQ,eAAe;YAAU,KAAK;QAAG;;0BACvF,6LAAC;0BAAG;;;;;;0BACJ,6LAAC,qKAAA,CAAA,UAAS;gBACR,OAAM;gBACN,OAAO;gBACP,UAAU,CAAA,IAAK,cAAc,EAAE,MAAM,CAAC,KAAK;gBAC3C,OAAO,CAAC,CAAC;gBACT,YAAY;gBACZ,SAAS;;;;;;0BAEX,6LAAC;gBAAI,OAAO;oBAAE,SAAS;oBAAQ,gBAAgB;oBAAY,KAAK;gBAAE;0BAChE,cAAA,6LAAC,+JAAA,CAAA,UAAM;oBAAC,MAAK;oBAAS,SAAQ;8BAAY;;;;;;;;;;;;;;;;;AAMlD;GAlDwB;KAAA","debugId":null}},
    {"offset": {"line": 816, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dustin/Documents/IOD/PhotoLodge/photolodge-app/src/components/ImageModal.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport Modal from \"@mui/material/Modal\";\r\nimport Box from \"@mui/material/Box\";\r\nimport ImagePreview from \"./ImagePreview\";\r\nimport EditForm from \"./EditForm\";\r\nimport UploadForm from \"./UploadForm\";\r\nimport NewFolderForm from \"./NewFolderForm\";\r\n\r\nexport default function ImageModal({ open, mode: initialMode = \"preview\", image, onClose, onSave, onDelete }) {\r\n  const [mode, setMode] = useState(initialMode);\r\n\r\n  useEffect(() => {\r\n    if (open) setMode(initialMode);\r\n  }, [open, initialMode]);\r\n\r\n  return (\r\n    <Modal open={open} onClose={onClose}>\r\n      <Box\r\n        sx={{\r\n          background: \"#222\",\r\n          color: \"#fff\",\r\n          p: 4,\r\n          borderRadius: 2,\r\n          maxWidth: 500,\r\n          mx: \"auto\",\r\n          mt: 10,\r\n          outline: \"none\",\r\n          \"&:focus\": { outline: \"none\" }\r\n        }}\r\n      >\r\n        {/* Debug line, optional: */}\r\n        {/* <div>Current mode: {mode}</div> */}\r\n        {mode === \"preview\" && image && (\r\n          <ImagePreview\r\n            image={image}\r\n            onEdit={() => setMode(\"edit\")}\r\n            onDelete={onDelete}\r\n            onClose={onClose}\r\n          />\r\n        )}\r\n        {mode === \"edit\" && image && (\r\n          <EditForm\r\n            post={image}\r\n            onSave={() => {\r\n              setMode(\"preview\");\r\n              if (onSave) onSave();\r\n            }}\r\n            onClose={() => setMode(\"preview\")}\r\n          />\r\n        )}\r\n        {mode === \"upload\" && (\r\n          <UploadForm\r\n            onSave={() => {\r\n              setMode(\"preview\");\r\n              if (onSave) onSave();\r\n            }}\r\n            onClose={() => setMode(\"preview\")}\r\n          />\r\n        )}\r\n        {mode === \"newFolder\" && (\r\n          <NewFolderForm\r\n            onSave={() => {\r\n              setMode(\"preview\");\r\n              if (onSave) onSave();\r\n            }}\r\n            onClose={() => setMode(\"preview\")}\r\n          />\r\n        )}\r\n      </Box>\r\n    </Modal>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AAEe,SAAS,WAAW,EAAE,IAAI,EAAE,MAAM,cAAc,SAAS,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE,QAAQ,EAAE;;IAC1G,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEjC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;gCAAE;YACR,IAAI,MAAM,QAAQ;QACpB;+BAAG;QAAC;QAAM;KAAY;IAEtB,qBACE,6LAAC,6JAAA,CAAA,UAAK;QAAC,MAAM;QAAM,SAAS;kBAC1B,cAAA,6LAAC,yJAAA,CAAA,UAAG;YACF,IAAI;gBACF,YAAY;gBACZ,OAAO;gBACP,GAAG;gBACH,cAAc;gBACd,UAAU;gBACV,IAAI;gBACJ,IAAI;gBACJ,SAAS;gBACT,WAAW;oBAAE,SAAS;gBAAO;YAC/B;;gBAIC,SAAS,aAAa,uBACrB,6LAAC,qIAAA,CAAA,UAAY;oBACX,OAAO;oBACP,QAAQ,IAAM,QAAQ;oBACtB,UAAU;oBACV,SAAS;;;;;;gBAGZ,SAAS,UAAU,uBAClB,6LAAC,iIAAA,CAAA,UAAQ;oBACP,MAAM;oBACN,QAAQ;wBACN,QAAQ;wBACR,IAAI,QAAQ;oBACd;oBACA,SAAS,IAAM,QAAQ;;;;;;gBAG1B,SAAS,0BACR,6LAAC,mIAAA,CAAA,UAAU;oBACT,QAAQ;wBACN,QAAQ;wBACR,IAAI,QAAQ;oBACd;oBACA,SAAS,IAAM,QAAQ;;;;;;gBAG1B,SAAS,6BACR,6LAAC,sIAAA,CAAA,UAAa;oBACZ,QAAQ;wBACN,QAAQ;wBACR,IAAI,QAAQ;oBACd;oBACA,SAAS,IAAM,QAAQ;;;;;;;;;;;;;;;;;AAMnC;GA/DwB;KAAA","debugId":null}},
    {"offset": {"line": 934, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dustin/Documents/IOD/PhotoLodge/photolodge-app/src/components/AllImagesGallery.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useSearch } from \"../context/SearchContext.jsx\";\r\nimport ImageModal from \"./ImageModal\";\r\nimport FloatingActionButton from \"./FloatingActionButton.jsx\";\r\n\r\nexport default function AllImagesGallery() {\r\n  const [images, setImages] = useState([]);\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [modalMode, setModalMode] = useState(\"preview\");\r\n  const [selectedImage, setSelectedImage] = useState(null);\r\n  const { search } = useSearch();\r\n\r\n  // Fetch images from backend API\r\n  const fetchImages = () => {\r\n    const userId = localStorage.getItem(\"userId\");\r\n    if (!userId) return;\r\n    fetch(`http://localhost:8080/api/posts/user/${userId}?t=${Date.now()}`)\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        setImages(data.data);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchImages();\r\n  }, []);\r\n\r\n  const handleImageClick = (img) => {\r\n    setSelectedImage(img);\r\n    setModalMode(\"preview\");\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const handleUploadClick = () => {\r\n    setSelectedImage(null);\r\n    setModalMode(\"upload\");\r\n    setModalOpen(true);\r\n  };\r\n\r\n  // Filter images by search term (tags, description, title)\r\n  const filteredImages = search.trim()\r\n    ? images.filter(img => {\r\n        const term = search.toLowerCase();\r\n        const tags = (img.tags || []).join(\" \").toLowerCase();\r\n        const desc = (img.description || \"\").toLowerCase();\r\n        const title = (img.title || \"\").toLowerCase();\r\n        return tags.includes(term) || desc.includes(term) || title.includes(term);\r\n      })\r\n    : images;\r\n\r\n  return (\r\n    <>\r\n      <div style={{ margin: \"20px 5px\", color: \"#e3e3e3\"}}>\r\n        <h5>All Files</h5>\r\n      </div>\r\n      <div style={{ display: \"flex\", flexWrap: \"wrap\", gap: \"16px\" }}>\r\n        {filteredImages.map((img) => (\r\n          <div\r\n            key={img._id}\r\n            style={{ width: \"200px\", height: \"200px\", overflow: \"hidden\", borderRadius: \"8px\", cursor: \"pointer\" }}\r\n            onClick={() => handleImageClick(img)}\r\n          >\r\n            <img\r\n              src={img.imageUrl}\r\n              alt={img.title}\r\n              style={{ width: \"100%\", height: \"100%\", objectFit: \"cover\" }}\r\n            />\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <ImageModal\r\n        open={modalOpen}\r\n        mode={modalMode}\r\n        image={selectedImage}\r\n        onClose={() => setModalOpen(false)}\r\n        onSave={() => {\r\n          fetchImages();\r\n          setModalOpen(false);\r\n        }}\r\n        onDelete={() => {\r\n          fetchImages();\r\n          setModalOpen(false);\r\n        }}\r\n      />\r\n  <div style={{ position: \"fixed\", bottom: 32, right: 50 }}>\r\n        <FloatingActionButton onClick={handleUploadClick} />\r\n      </div>\r\n    </>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAOe,SAAS;;IACtB,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE,EAAE;IACvC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnD,MAAM,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,mIAAA,CAAA,YAAS,AAAD;IAE3B,gCAAgC;IAChC,MAAM,cAAc;QAClB,MAAM,SAAS,aAAa,OAAO,CAAC;QACpC,IAAI,CAAC,QAAQ;QACb,MAAM,CAAC,qCAAqC,EAAE,OAAO,GAAG,EAAE,KAAK,GAAG,IAAI,EACnE,IAAI,CAAC,CAAA,MAAO,IAAI,IAAI,IACpB,IAAI,CAAC,CAAA;YACJ,UAAU,KAAK,IAAI;QACrB;IACJ;IAEA,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;sCAAE;YACR;QACF;qCAAG,EAAE;IAEL,MAAM,mBAAmB,CAAC;QACxB,iBAAiB;QACjB,aAAa;QACb,aAAa;IACf;IAEA,MAAM,oBAAoB;QACxB,iBAAiB;QACjB,aAAa;QACb,aAAa;IACf;IAEA,0DAA0D;IAC1D,MAAM,iBAAiB,OAAO,IAAI,KAC9B,OAAO,MAAM,CAAC,CAAA;QACZ,MAAM,OAAO,OAAO,WAAW;QAC/B,MAAM,OAAO,CAAC,IAAI,IAAI,IAAI,EAAE,EAAE,IAAI,CAAC,KAAK,WAAW;QACnD,MAAM,OAAO,CAAC,IAAI,WAAW,IAAI,EAAE,EAAE,WAAW;QAChD,MAAM,QAAQ,CAAC,IAAI,KAAK,IAAI,EAAE,EAAE,WAAW;QAC3C,OAAO,KAAK,QAAQ,CAAC,SAAS,KAAK,QAAQ,CAAC,SAAS,MAAM,QAAQ,CAAC;IACtE,KACA;IAEJ,qBACE;;0BACE,6LAAC;gBAAI,OAAO;oBAAE,QAAQ;oBAAY,OAAO;gBAAS;0BAChD,cAAA,6LAAC;8BAAG;;;;;;;;;;;0BAEN,6LAAC;gBAAI,OAAO;oBAAE,SAAS;oBAAQ,UAAU;oBAAQ,KAAK;gBAAO;0BAC1D,eAAe,GAAG,CAAC,CAAC,oBACnB,6LAAC;wBAEC,OAAO;4BAAE,OAAO;4BAAS,QAAQ;4BAAS,UAAU;4BAAU,cAAc;4BAAO,QAAQ;wBAAU;wBACrG,SAAS,IAAM,iBAAiB;kCAEhC,cAAA,6LAAC;4BACC,KAAK,IAAI,QAAQ;4BACjB,KAAK,IAAI,KAAK;4BACd,OAAO;gCAAE,OAAO;gCAAQ,QAAQ;gCAAQ,WAAW;4BAAQ;;;;;;uBAPxD,IAAI,GAAG;;;;;;;;;;0BAYlB,6LAAC,mIAAA,CAAA,UAAU;gBACT,MAAM;gBACN,MAAM;gBACN,OAAO;gBACP,SAAS,IAAM,aAAa;gBAC5B,QAAQ;oBACN;oBACA,aAAa;gBACf;gBACA,UAAU;oBACR;oBACA,aAAa;gBACf;;;;;;0BAEN,6LAAC;gBAAI,OAAO;oBAAE,UAAU;oBAAS,QAAQ;oBAAI,OAAO;gBAAG;0BACjD,cAAA,6LAAC,6IAAA,CAAA,UAAoB;oBAAC,SAAS;;;;;;;;;;;;;AAIvC;GApFwB;;QAKH,mIAAA,CAAA,YAAS;;;KALN","debugId":null}}]
}