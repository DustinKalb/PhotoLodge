{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dustin/Documents/IOD/PhotoLodge/photolodge-app/src/components/ImageGallery/ImageGallery.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useSearch } from \"../../context/SearchContext.jsx\";\r\nimport ImageModal from \"../ImageModal.jsx\";\r\nimport FloatingActionButton from \"../FloatingActionButton/FloatingActionButton.jsx\";\r\nimport FolderRoundedIcon from \"@mui/icons-material/FolderRounded\";\r\nimport AddIcon from \"@mui/icons-material/Add\";\r\nimport Link from \"next/link\";\r\n\r\nexport default function ImageGallery() {\r\n  const [images, setImages] = useState([]);\r\n  const [folders, setFolders] = useState([]);\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [modalMode, setModalMode] = useState(\"preview\");\r\n  const [selectedImage, setSelectedImage] = useState(null);\r\n  const { search } = useSearch();\r\n\r\n  // Fetch images and folders from backend API\r\n  const fetchImages = () => {\r\n    const userId = localStorage.getItem(\"userId\");\r\n    if (!userId) return;\r\n    fetch(`http://localhost:8080/api/posts/user/${userId}`)\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        setImages(data.data);\r\n      });\r\n    fetch(`http://localhost:8080/api/folders/user/${userId}`)\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        setFolders(data.data || []);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchImages();\r\n  }, []);\r\n\r\n  const handleImageClick = (img) => {\r\n    setSelectedImage(img);\r\n    setModalMode(\"preview\");\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const handleUploadClick = () => {\r\n    setSelectedImage(null);\r\n    setModalMode(\"upload\");\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const handleEdit = () => {\r\n    setModalMode(\"edit\");\r\n  };\r\n\r\n  const handleNewFolderClick = () => {\r\n    setSelectedImage(null);\r\n    setModalMode(\"newFolder\");\r\n    setModalOpen(true);\r\n  };\r\n\r\n  // Filtering logic\r\n  const filteredImages = search.trim()\r\n    ? images.filter(img => {\r\n        const term = search.toLowerCase();\r\n        const tags = (img.tags || []).join(\" \").toLowerCase();\r\n        const desc = (img.description || \"\").toLowerCase();\r\n        const title = (img.title || \"\").toLowerCase();\r\n        return tags.includes(term) || desc.includes(term) || title.includes(term);\r\n      })\r\n    : images;\r\n\r\n  const untaggedImages = filteredImages.filter(img => !img.tags || img.tags.length === 0);\r\n  const taggedImages = filteredImages.filter(img => img.tags && img.tags.length > 0);\r\n\r\n  return (\r\n    <>\r\n      {/* Folders section */}\r\n      <div style={{ margin: \"20px 5px 0 5px\", display: \"flex\", alignItems: \"center\" }}>\r\n        <h5 style={{ margin: 0, marginRight: 12, color: \"#e3e3e3\" }}>Folders</h5>\r\n        <button\r\n          onClick={handleNewFolderClick}\r\n          style={{\r\n            width: 20,\r\n            height: 20,\r\n            borderRadius: \"50%\",\r\n            border: \"none\",\r\n            background: \"tan\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            marginLeft: 4,\r\n            cursor: \"pointer\",\r\n            padding: 0,\r\n          }}\r\n          aria-label=\"Add Folder\"\r\n        >\r\n          <AddIcon style={{ color: \"black\", fontSize: 15 }} />\r\n        </button>\r\n      </div>\r\n      <br/>\r\n      {/* Folder icons row */}\r\n      <div style={{ display: \"flex\", alignItems: \"center\" }}>\r\n        {folders.map(folder => (\r\n          <Link key={folder._id} href={`/folder/${folder._id}`} style={{ textDecoration: \"none\" }}>\r\n            <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\", margin: \"0 16px\", cursor: \"pointer\" }}>\r\n              <FolderRoundedIcon style={{ color: \"#e3e3e3\", fontSize: 64, marginBottom: 4 }} />\r\n              <span style={{ color: \"#e3e3e3\", fontWeight: 500, fontSize: 14, lineHeight: 1.2 }}>{folder.name}</span>\r\n            </div>\r\n          </Link>\r\n        ))}\r\n      </div>\r\n      <br/>\r\n      <hr style={{ border: 'none', borderTop: '1px solid #444', margin: '16px 0' }} />\r\n      {/* Untagged images section */}\r\n      {untaggedImages.length > 0 && (\r\n        <>\r\n          <div style={{ margin: \"20px 5px\", color: \"#e3e3e3\" }}>\r\n            <h5>Untagged</h5>\r\n          </div>\r\n          <div style={{ display: \"flex\", flexWrap: \"wrap\", gap: \"16px\" }}>\r\n            {untaggedImages.map((img) => (\r\n              <div\r\n                key={img._id}\r\n                style={{ width: \"200px\", height: \"200px\", overflow: \"hidden\", borderRadius: \"8px\", cursor: \"pointer\" }}\r\n                onClick={() => handleImageClick(img)}\r\n              >\r\n                <img\r\n                  src={img.imageUrl}\r\n                  alt={img.title}\r\n                  style={{ width: \"100%\", height: \"100%\", objectFit: \"cover\" }}\r\n                />\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <br/>\r\n          <hr style={{ border: 'none', borderTop: '1px solid #444', margin: '16px 0' }} />\r\n        </>\r\n      )}\r\n\r\n      {/* Tagged images section */}\r\n      <div style={{ margin: \"20px 5px\", color: \"#e3e3e3\"}}>\r\n        <h5>Tagged</h5>\r\n      </div>\r\n      <div style={{ display: \"flex\", flexWrap: \"wrap\", gap: \"16px\" }}>\r\n        {taggedImages.map((img) => (\r\n          <div\r\n            key={img._id}\r\n            style={{ width: \"200px\", height: \"200px\", overflow: \"hidden\", borderRadius: \"8px\", cursor: \"pointer\" }}\r\n            onClick={() => handleImageClick(img)}\r\n          >\r\n            <img\r\n              src={img.imageUrl}\r\n              alt={img.title}\r\n              style={{ width: \"100%\", height: \"100%\", objectFit: \"cover\" }}\r\n            />\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <ImageModal\r\n        open={modalOpen}\r\n        mode={modalMode}\r\n        image={selectedImage}\r\n        onClose={() => setModalOpen(false)}\r\n        onSave={() => {\r\n          fetchImages();\r\n          setModalOpen(false);\r\n        }}\r\n        onDelete={() => {\r\n          fetchImages();\r\n          setModalOpen(false);\r\n        }}\r\n      />\r\n      <div style={{ position: \"fixed\", bottom: 32, right: 50 }}>\r\n        <FloatingActionButton onClick={handleUploadClick} />\r\n      </div>\r\n    </>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 408, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dustin/Documents/IOD/PhotoLodge/photolodge-app/node_modules/%40mui/icons-material/esm/FolderRounded.js"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M10.59 4.59C10.21 4.21 9.7 4 9.17 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8z\"\n}), 'FolderRounded');"],"names":[],"mappings":";;;AAEA;AACA;AAHA;;;uCAIe,CAAA,GAAA,qKAAA,CAAA,UAAa,AAAD,EAAE,WAAW,GAAE,CAAA,GAAA,sKAAA,CAAA,MAAI,AAAD,EAAE,QAAQ;IACrD,GAAG;AACL,IAAI","ignoreList":[0],"debugId":null}}]
}